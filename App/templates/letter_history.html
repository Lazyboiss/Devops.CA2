<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Letter History</title>
    <link rel="stylesheet" href="../static/table_style.css">
</head>
<body>
    <h1>Letter Generation History</h1>
    <a href="/history" class="btn">Back to History Menu</a>
    <div>
    <table border="1px">
        <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Generated On</th>
            <th>Letter</th>
            <th>Generated Image</th>
            <th>Download</th>
        </tr>
        {% if letter_entries %}
            {% for entry in letter_entries %}
            <tr>
                <td>{{ entry.id }}</td>
                <td>{{ entry.username }}</td>
                <td>{{ entry.generated_on }}</td>
                <td>{{ entry.letter }}</td>
                <td><img src="data:image/png;base64,{{ entry.generated_image }}" alt="Generated Letter Image" width="50"></td>
                <td><a href="data:image/png;base64,{{ entry.generated_image }}" download="letter_{{ entry.id }}.png">Download</a></td>
            </tr>
            {% endfor %}
        {% else %}
            <tr><td colspan="6">No letter history found.</td></tr>
        {% endif %}
    </table>
    </div>
</body>
</html>